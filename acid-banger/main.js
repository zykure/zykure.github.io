(()=>{"use strict";function e(e){return Math.floor(Math.random()*(e-.01))}function t(t){return t[e(t.length)]}var n=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function c(e){try{u(a.next(e))}catch(e){o(e)}}function i(e){try{u(a.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,i)}u((a=a.apply(e,t||[])).next())}))};const a=new Map,r=new Map;function o(e){const t=e.substring(e.length-1),n=e.substring(0,e.length-1);return 12*parseInt(t)+a.get(n)+12}function c(e){return 440*Math.pow(2,(e-69)/12)}function i(e=new(window.AudioContext||window.webkitAudioContext)){function t(){if(e.createConstantSource)return e.createConstantSource();{const t=e.createBufferSource();t.buffer=e.createBuffer(1,256,e.sampleRate);const n=t.buffer.getChannelData(0);for(let e=0;e<n.length;e++)n[e]=1;const a=e.createGain(),r=a.gain;return t.loop=!0,t.connect(a),Object.assign(a,{offset:r,start:()=>t.start()})}}function a(e=50,t=20){const n=new Float32Array(256),a=Math.PI/180;for(let r=0;r<256;++r){const o=2*r/256-1;n[r]=(3+e)*o*t*a/(Math.PI+e*Math.abs(o))}return n}const r=function(){const t=e.createGain();t.gain.value=.5;const n=e.createDynamicsCompressor();n.attack.value=.005,n.release.value=.1,n.ratio.value=15,n.knee.value=0,n.threshold.value=-.5;const a=e.createAnalyser();return a.fftSize=2048,n.connect(a),t.connect(n),n.connect(e.destination),{in:t,analyser:a}}();function i(e){return new Promise((t=>{setTimeout((()=>t()),1e3*e)}))}function u(t,a,o,c,u=0,s=r.in){return n(this,void 0,void 0,(function*(){const n=e.createOscillator();n.type="sawtooth",n.frequency.value=t,n.start();const r=e.createBiquadFilter();r.type="lowpass",r.frequency.value=4*t,r.Q.value=5;const l=e.createGain();l.gain.value=0;const d=e.createPanner();d.panningModel="equalpower",d.setPosition(u,0,1-Math.abs(u)),n.connect(r),r.connect(l),l.connect(d),d.connect(s),l.gain.linearRampToValueAtTime(.1,e.currentTime+a),yield i(o+a),l.gain.setValueAtTime(.1,e.currentTime),l.gain.linearRampToValueAtTime(0,e.currentTime+c),r.frequency.linearRampToValueAtTime(Math.max(t/2,400),e.currentTime+c),yield i(c+.01),n.stop(e.currentTime),d.disconnect()}))}function s(t){return n(this,void 0,void 0,(function*(){const a=yield function(t){return n(this,void 0,void 0,(function*(){const n=yield fetch(t),a=yield n.arrayBuffer();var r;return yield(r=a,new Promise(((t,n)=>e.decodeAudioData(r,t,n))))}))}(t);return{play:function(t=.4,n=1,o=r.in){const c=e.createBufferSource();c.buffer=a,c.loop=!1;const i=e.createGain();i.gain.setValueAtTime(t,e.currentTime),i.gain.linearRampToValueAtTime(0,e.currentTime+n),c.connect(i),i.connect(o),c.start(e.currentTime)}}}))}return{tone:u,SimpleToneSynth:function(e,t,n,a=r.in){return{play:function(r){u(function(e){return c("number"==typeof e?e:o(e))}(r),e,t,n,2*Math.random()-1,a)}}},DelayInsert:function(t,n,a,o=r.in){const c=e.createDelay(1);c.delayTime.value=t;const i=e.createGain();i.gain.value=n,c.connect(i),i.connect(c);const u=e.createGain();u.gain.value=a,c.connect(u),u.connect(o);const s=e.createGain();return s.gain.value=1,s.connect(c),s.connect(o),{in:s,feedback:i.gain,wet:u.gain,delayTime:c.delayTime}},ThreeOh:function(n="sawtooth",i=r.in){const u=e.createBiquadFilter();u.type="lowpass",u.Q.value=20,u.frequency.value=300;const s=u.Q,l=u.frequency,d=t();d.start();const m=d.offset,f=t();f.start(),f.offset.value=0;const h=e.createGain();h.gain.value=0;const v=h.gain,g=e.createWaveShaper();let p=v.value;g.curve=a(p),g.oversample="4x";const b=e.createGain();b.gain.value=4e3;const y=b.gain;f.connect(b),b.connect(u.detune);const w=e.createOscillator();w.type=n,w.frequency.value=440,w.start();const T=e.createGain();return T.gain.value=0,w.connect(T),T.connect(u),u.connect(g),g.connect(i),{noteOn:function(t,n=!1,r=!1){n?(f.offset.cancelScheduledValues(e.currentTime),f.offset.setValueAtTime(1,e.currentTime),f.offset.exponentialRampToValueAtTime(.01,e.currentTime+m.value/3)):(f.offset.cancelScheduledValues(e.currentTime),f.offset.setValueAtTime(1,e.currentTime),f.offset.exponentialRampToValueAtTime(.01,e.currentTime+m.value)),w.frequency.cancelScheduledValues(e.currentTime),w.frequency.setTargetAtTime(c(o(t)),e.currentTime,r?.02:.002),T.gain.cancelScheduledValues(e.currentTime),T.gain.setValueAtTime(n?.2:.15,e.currentTime),T.gain.linearRampToValueAtTime(.1,e.currentTime+.2),v.value!=p&&(p=v.value,g.curve=a(p))},noteOff:function(){T.gain.cancelScheduledValues(e.currentTime),T.gain.setTargetAtTime(0,e.currentTime,.01)},params:{cutoff:l,resonance:s,envMod:y,decay:m,distortion:v}}},kick:function(t=r.in){const n=e.createOscillator();n.frequency.value=400;const a=e.createGain();a.gain.value=.3,n.start(),n.frequency.exponentialRampToValueAtTime(50,e.currentTime+.04),a.gain.setValueCurveAtTime([.5,.5,.45,.4,.25,0],e.currentTime,.09),n.stop(e.currentTime+.1),window.setTimeout((()=>a.disconnect()),200),n.connect(a),a.connect(t)},Sampler:s,SamplerDrumMachine:function(t,a=r.in){return n(this,void 0,void 0,(function*(){const n=e.createGain();n.gain.value=1,n.connect(a);const r=t.map(s);return{triggers:(yield Promise.all(r)).map((e=>({play:t=>e.play(.7*t,.5*t,n)})))}}))},master:r,context:e}}function u(e,t){let n=[];const a={value:t};return{name:e,subscribe:function(e){e(a.value),n.push(e)},get value(){return a.value},set value(e){a.value=e,function(){for(let e of n)e(a.value)}()}}}function s(e,t=!1){return u(e,t)}function l(e,t,n){return Object.assign(u(e,n),{bounds:t})}function d(){let n=u("note set",["C1"]),a=s("new note set",!0);const o=[[0,0,12,24,27],[0,0,0,12,10,19,26,27],[0,1,7,10,12,13],[0],[0,0,0,12],[0,0,12,14,15,19],[0,0,0,0,12,13,16,19,22,24,25],[0,0,0,7,12,15,17,20,24]];return{createPattern:function(){1==a.value&&(function(){const a=e(15)+16,c=t(o);n.value=c.map((e=>function(e){const t=Math.floor(e/12),n=Math.floor(e%12);return`${r.get(n)}${t}`}(e+a)))}(),a.value=!1);const c=[];for(let e=0;e<16;e++){const a=1*(e%4==0?.6:e%3==0?.5:e%2==0?.3:.1);Math.random()<a?c.push({note:t(n.value),accent:Math.random()<.3,glide:Math.random()<.1}):c.push({note:"-",accent:!1,glide:!1})}return c},newNotes:a,noteSet:n}}function m(e){return e<0?0:e>1?1:e}(()=>{function e(e,t){a.set(e,t),r.set(t,e)}e("A",9),e("A#",10),e("B",11),e("C",0),e("C#",1),e("D",2),e("D#",3),e("E",4),e("F",5),e("F#",6),e("G",7),e("G#",8)})();const f={bg:"#222266",note:"#88aacc",accent:"#AA88CC",glide:"#CCAA88",text:"#CCCCFF",highlight:"rgba(255,255,255,0.2)",grid:"rgba(255,255,255,0.2)",dial:"#AA88CC"};function h(e,...t){const n=Array.isArray(e)?e:Object.keys(e).map((t=>e[t])),a=document.createElement("div");return a.classList.add("params",...t),n.forEach((e=>{const t=function(e,t,n="red",a="white"){const r=document.createElement("canvas");r.classList.add("dial");const o=r.width=70,c=r.height=50,i=r.getContext("2d");let u=.5,s=.5,l=0,d=null;function f(){i.clearRect(0,0,o,c);const e=[.8*Math.PI,2.2*Math.PI];i.strokeStyle=n,i.lineWidth=2,i.beginPath(),i.arc(o/2,c/2,20,e[0],e[1]),i.stroke(),i.lineWidth=o/8;const r=e[0]+u*(e[1]-e[0]);if(i.beginPath(),i.arc(o/2,c/2,20,r-.2,r+.2),i.stroke(),l>0){i.strokeStyle="rgba(0,255,0,"+m(l/10)+")",i.lineWidth=o/8;const t=e[0]+u*(e[1]-e[0]);i.beginPath(),i.arc(o/2,c/2,20,t-.2,t+.2),i.stroke()}if(t){i.fillStyle=a,i.font="10px Orbitron";const e=i.measureText(t).width;i.fillText(t,o/2-e/2,c/2+20)}}function h(t){return e[0]+(e[1]-e[0])*t}function v(t){var n;u=(t-e[0])/(e[1]-e[0]),f(),Math.abs(u-s)>.002&&(n=4+Math.floor(Math.abs(u-s)/.001),d&&window.clearInterval(d),l=Math.min(n,10),d=window.setInterval((()=>{l--,f()}),100)),s=u}const g={isDragging:!1,handler:[e=>{}]};return r.addEventListener("mousedown",(e=>{g.isDragging=!0})),window.addEventListener("mousemove",(e=>{if(g.isDragging){const t=(e.movementX-e.movementY)/100;u=m(u+t);const n=h(u);v(n),g.handler.forEach((e=>e(n)))}})),window.addEventListener("mouseup",(e=>{g.isDragging=!1})),f(),{element:r,get value(){return h(u)},set value(e){v(e)},bind:function(e){g.handler.push(e)}}}(e.bounds,e.name,f.dial,f.text);t.bind((t=>{e.value=t})),e.subscribe((e=>t.value=e)),a.append(t.element)})),a}function v(e){const t=document.createElement("button");return t.classList.add("trigger-button"),t.innerText="âŸ³",e.subscribe((e=>{e?t.classList.add("waiting"):t.classList.remove("waiting")})),t.addEventListener("click",(function(){e.value=!0})),t}function g(e,...t){const n=document.createElement("button");return n.classList.add(...t),n.innerText=e.name,n.addEventListener("click",(()=>e.value=!e.value)),e.subscribe((e=>{e?(n.classList.add("on"),n.classList.remove("off")):(n.classList.add("off"),n.classList.remove("on"))})),n}function p(e){const t=document.createElement("div");return t.classList.add("label"),t.innerText=e,t}function b(...e){const t=document.createElement("div");return t.classList.add("machine"),t.append(...e),t}function y(e,t,...n){const a=document.createElement("div");return a.classList.add("control-group",...n),a.append(e,t),a}function w(...e){const t=document.createElement("div");return t.classList.add("group"),t.append(...e),t}var T=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function c(e){try{u(a.next(e))}catch(e){o(e)}}function i(e){try{u(a.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,i)}u((a=a.apply(e,t||[])).next())}))};function M(e,t,n,a,r=16){const o=e.ThreeOh(t,n),c=u("Pattern",[]),i=s("New Pattern Trigger",!0);a.newNotes.subscribe((e=>{1==e&&(i.value=!0)}));const d={cutoff:l("Cutoff",[30,700],400),resonance:l("Resonance",[1,30],15),envMod:l("Env Mod",[0,8e3],4e3),decay:l("Decay",[.1,.9],.5),distortion:l("Dist",[0,80],0)};return d.cutoff.subscribe((e=>o.params.cutoff.value=e)),d.resonance.subscribe((e=>o.params.resonance.value=e)),d.envMod.subscribe((e=>o.params.envMod.value=e)),d.decay.subscribe((e=>o.params.decay.value=e)),d.distortion.subscribe((e=>o.params.distortion.value=e)),{step:function(e){(0===e&&1==i.value||0==c.value.length)&&(c.value=a.createPattern(),i.value=!1);const t=c.value[e%r];"-"!=t.note?o.noteOn(t.note,t.accent,t.glide):o.noteOff()},pattern:c,parameters:d,newPattern:i}}function k(e){return T(this,void 0,void 0,(function*(){const n=yield e.SamplerDrumMachine(["samples/bd01.mp4","samples/oh01.mp4","samples/hh01.mp4","samples/sd02.mp4","samples/cp01.mp4"]),a=u("Drum Pattern",[]),r=[u("Mute BD",!1),u("Mute OH",!1),u("Mute CH",!1),u("Mute SD",!1),u("Mute CP",!1)],o=s("New Pattern Trigger",!0),c=function(e=!1){const n=new Array(16),a=new Array(16),r=new Array(16),o=new Array(16),c=new Array(16),i=t(["electro","fourfloor"]),u=t(["offbeats","closed",e?"offbeats":"none"]),s=t(["backbeat","skip",e?"backbeat":"none"]),l=t(["backbeat","skip",e?"backbeat":"none"]);if("fourfloor"==i)for(let e=0;e<16;e++)e%4==0?n[e]=.9:e%2==0&&Math.random()<.1&&(n[e]=.6);else if("electro"==i)for(let e=0;e<16;e++)0==e?n[e]=1:(e%2==0&&e%8!=4&&Math.random()<.5||Math.random()<.05)&&(n[e]=.9*Math.random());if("backbeat"==s)for(let e=0;e<16;e++)e%8==4&&(o[e]=1);else if("skip"==s)for(let e=0;e<16;e++)e%8==3||e%8==6?o[e]=.6+.4*Math.random():e%2==0&&Math.random()<.2?o[e]=.4+.2*Math.random():Math.random()<.1&&(o[e]=.2+.2*Math.random());if("backbeat"==l)for(let e=0;e<16;e++)e%8==4?c[e]=.5:e%8==5&&o[e-1]&&(c[e]=.3+.2*Math.random());else if("skip"==l)for(let e=0;e<16;e++)e%8==3||e%8==6?c[e]=.5+.3*Math.random():(e%8==4||e%8==7)&&c[e-1]&&Math.random()<.5?c[e]=.3+.2*Math.random():e%2==0&&Math.random()<(o[e]?.2:.4)?c[e]=.4+.1*Math.random():Math.random()<.1&&(c[e]=.1+.1*Math.random());if("offbeats"==u)for(let e=0;e<16;e++)e%4==2?a[e]=.4:Math.random()<.3&&(Math.random()<.5?r[e]=.2+.2*Math.random():a[e]=.1+.2*Math.random());else if("closed"==u)for(let e=0;e<16;e++)e%2==0?r[e]=.4:Math.random()<.5&&(r[e]=.2+.3*Math.random());return[n,a,r,o,c]};return{step:function(e){(0==e&&1==o.value||0==a.value.length)&&(a.value=c(!0),o.value=!1);for(let t in a.value){const o=a.value[t][e%a.value[t].length];o&&!r[t].value&&n.triggers[t].play(o)}},pattern:a,mutes:r,newPattern:o}}))}!function(e,t,n,a="Click, tap or press any key to start"){const r=document.createElement("button");r.id="_start_button";const o=document.createElement("div");o.id="_intro_text",r.append(o),o.innerHTML=t+"<br><br>"+n+"<br><br>"+a,document.head.insertAdjacentHTML("beforeend",`\n    <style>\n        body {\n            height: 95vh;  margin: 0; padding: 0; \n        }\n        #${r.id} {\n            width: 100%;\n            height: 100%;\n            display: block;\n            position: absolute;\n            top: 0;\n            left: 0;\n            z-index: 50;\n            color:grey;\n            background-color: black;\n        }\n        \n        #${o.id} {\n            max-width: 640px;\n            font-size: 1.5em;\n            margin-left: auto;\n            margin-right: auto;\n            text-align:left;\n            font-family: monospace;\n        }\n    </style>\n    `),document.body.append(r);let c=!1;function i(){c||(c=!0,e(),r.style.display="none")}r.addEventListener("click",i),window.addEventListener("keydown",i)}((function(){return T(this,void 0,void 0,(function*(){const e=i(),t=function(){const e=l("BPM",[70,200],142),t=l("Current Step",[0,15],0),n=function(e,t=4,n=0){let a=e,r=(e,t)=>{},o=(new Date).getTime(),c=0;return window.setTimeout((function e(){const i=(new Date).getTime()-o;r(i,c);const u=c%2==0?1+n:1-n;c++,window.setTimeout(e,u*(6e4/a)/t)}),6e4/e/t),{bind:function(e){r=e},setBpm:e=>a=e}}(e.value,4,0);return e.subscribe(n.setBpm),n.bind(((e,n)=>{t.value=n%16})),{bpm:e,currentStep:t}}(),n=function(e){const t=l("Dry/Wet",[0,.5],.5),n=l("Feedback",[0,.9],.3),a=l("Time",[0,2],.3),r=e.DelayInsert(a.value,t.value,n.value);return t.subscribe((e=>r.wet.value=e)),n.subscribe((e=>r.feedback.value=e)),a.subscribe((e=>r.delayTime.value=e)),{dryWet:t,feedback:n,delayTime:a,inputNode:r.in}}(e);t.bpm.subscribe((e=>n.delayTime.value=3/4*(60/e)));const a=d(),r={notes:[M(e,"sawtooth",n.inputNode,a),M(e,"square",n.inputNode,a)],drums:yield k(e),gen:a,delay:n,clock:t};t.currentStep.subscribe((e=>[...r.notes,r.drums].forEach((t=>t.step(e)))));const c=function(e){const t=l("upcomingMeasure",[0,1/0],0),n=l("measure",[0,1/0],0),a=u("Alter Patterns",!0),r=u("Twiddle With Knobs",!0),o=u("Mute Drum Parts",!0);var c=[0,0];e.clock.currentStep.subscribe((e=>{4===e?t.value=t.value+1:15===e&&(n.value=n.value+1)})),t.subscribe((t=>{a.value&&(t%64==0&&Math.random()<.2&&(console.log("measure #%d: will generate new notes",t),e.gen.newNotes.value=!0,c[0]=c[1]=t),t%16==0?(e.notes.forEach(((e,n)=>{Math.random()<.5&&(console.log("measure #%d: will generate new pattern for unit %d",t,n),e.newPattern.value=!0,c[n]=t)})),Math.random()<.3&&(console.log("measure #%d: will generate new pattern for drums",t),e.drums.newPattern.value=!0)):t%16==4&&e.notes.every(((e,n)=>{const a=t-c[n];if(a>=20&&Math.random()<.5)return console.log("measure #%d: will generate new pattern for unit %d (age %d)",t,n,a),e.newPattern.value=!0,void(c[n]=t)})))})),n.subscribe((t=>{if(o.value){const n=e.drums.mutes.filter(Boolean).length,a=[Math.random()<.2,Math.random()<.5,Math.random()<.5,Math.random()<.5,Math.random()<.8];a.filter(Boolean).length==a.length||(t%8==0?(console.log("measure #%d: may mute drum parts",t),e.drums.mutes.forEach(((e,t)=>{e.value=a[t]}))):t%8==7?(console.log("measure #%d: may mute drum parts",t),e.drums.mutes.forEach(((e,t)=>{Math.random()<.5&&(e.value||(e.value=a[t]))}))):t%4==0&&(console.log("measure #%d: may unmute drum parts (%d muted)",t,n),e.drums.mutes.forEach(((e,t)=>{Math.random()<1/n&&e.value&&(e.value=a[t])}))))}}));const i=[...e.notes.flatMap((e=>Object.values(e.parameters))),e.delay.feedback,e.delay.dryWet].map((e=>function(e,t=1/400){const[n,a]=e.bounds;let r=0,o=t*(a-n),c=0,i=(n+a)/2;return{step:()=>{i!=e.value?(r=0,i=e.value,c=200):(c>0&&c--,c<100&&(r*=c>0?.8:.98,r+=(Math.random()-.5)*o,e.value+=r,i=e.value,e.value>n+.8*(a-n)?r-=Math.random()*o:e.value<n+.2*(a-n)&&(r+=Math.random()*o)))}}}(e)));return window.setInterval((()=>{r.value&&i.forEach((e=>e.step()))}),100),{switches:[a,r,o]}}(r),s=function(e,t,n){const a=document.createElement("div");a.id="ui";const r=function(...e){const t=document.createElement("div");return t.classList.add("controls"),t.append(...e),t}(function(e){return y(p("Autopilot"),w(...e.switches.map((e=>g(e,"autopilot-button")))))}(t),function(e){const t=document.createElement("div");return t.classList.add("parameter-controlled","notegen-note-display"),e.noteSet.subscribe((e=>{t.innerText=e.join(", ")})),y(p("Notegen"),w(v(e.newNotes),t),"notegen-box")}(e.gen),function(e){const t=h([e.dryWet,e.feedback]);return t.classList.add("horizontal"),y(p("Delay"),t)}(e.delay),y(p("Clock"),h([e.clock.bpm],"horizontal")),y(p("Meter"),w(function(e){const t=document.createElement("canvas");t.style.width="100%";let n=t.width=200;const a=t.height=50,r=t.getContext("2d"),o=new Uint8Array(e.fftSize),c=new Uint8Array(e.frequencyBinCount/2);return window.requestAnimationFrame((function t(){e.getByteTimeDomainData(o),e.getByteFrequencyData(c),r.clearRect(0,0,n,a),r.fillStyle="white";for(let e=0;e<c.length;e++){const t=c[e]/256;r.fillStyle="rgb("+(c[e]/2+128)+",0,0)",r.fillRect(n*e/c.length,a-1*t*a,n/c.length,1*t*a)}r.strokeStyle="white",r.beginPath(),r.moveTo(0,a/2);for(let e=0;e<o.length;e++){const t=o[e]/128-1;r.lineTo(n*e/o.length,a/2+1.5*t*a/2)}r.stroke(),window.requestAnimationFrame(t)})),t}(n)),"meter")),c=document.createElement("div");c.classList.add("machines");const i=e.notes.map(((t,n)=>b(p("303-0"+(n+1)),w(v(t.newPattern),function(e,t,n=f){const a=document.createElement("canvas");function r(){const r=e.value,c=a.width=a.clientWidth,i=a.height=200,u=i/50,s=a.getContext("2d");s.font="10px Orbitron",s.fillStyle=n.bg,s.fillRect(0,0,c,i),s.strokeStyle=n.grid;for(let e=0;e<r.length;e++){const t=c*e/r.length;s.beginPath(),s.moveTo(t,0),s.lineTo(t,i),s.stroke()}for(let e=0;e<80;e++){const t=i-e*u;s.beginPath(),s.moveTo(0,t),s.lineTo(c,t),s.stroke()}for(let e=0;e<r.length;e++){const t=r[e];if("-"===t.note);else{const a=o(t.note)-24,l=c*e/r.length,d=i-a*u,m=c/r.length,f=5;s.fillStyle=t.glide?n.glide:t.accent?n.accent:n.note,s.fillRect(l,d,m,f),s.fillStyle=n.text;const h=l+m/2-s.measureText(t.note).width/2;s.fillText(t.note,h,d)}}s.fillStyle=n.highlight,s.fillRect(c*t.value/r.length,0,c/r.length,i)}return a.classList.add("pattern"),e.subscribe(r),t.subscribe(r),a}(t.pattern,e.clock.currentStep),h(t.parameters))))),u=b(p("909-XX"),w(v(e.drums.newPattern),function(e,t,n,a=f){const r=document.createElement("canvas");function o(){const o=r.width=r.clientWidth,c=r.height=100,i=r.getContext("2d");i.fillStyle=a.bg,i.fillRect(0,0,o,c);for(let n=0;n<16;n++){const a=o*n/16;for(let r=0;r<e.value.length;r++){const u=r/e.value.length*c;e.value[r][n]&&(t[r].value?i.fillStyle="rgba(128,0,0,0.4)":i.fillStyle="rgba(136,170,204,"+e.value[r][n]+")",i.fillRect(a,u,o/16,c/e.value.length))}}i.fillStyle=a.highlight,i.fillRect(o*n.value/16,0,o/16,c)}return r.classList.add("pattern"),e.subscribe(o),n.subscribe(o),r}(e.drums.pattern,e.drums.mutes,e.clock.currentStep),function(e){const t=document.createElement("div");return t.classList.add("mutes"),t.append(...e.map((e=>g(e)))),t}(e.drums.mutes)));return c.append(...i,u),a.append(c,r),a}(r,c,e.master.analyser);document.body.append(s)}))}),"Spicy Endless Acid Banger","A collaboration between human and algorithm by Vitling, spiced up by Zykure")})();